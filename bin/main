#!/usr/bin/env ruby
class Player
  attr_accessor :name, :sign, :num_of_games, :num_of_wins, :num_of_losses

  def initialize(name, sign)
    @name = name
    @sign = sign
    # num_of_games = 0
    # num_of_wins = 0
    # num_of_losses = 0
  end
end

class Game
  attr_accessor :board_ui, :board_logic

  def initialize
    @board_ui = '| 1 | 2 | 3 |
| 4 | 5 | 6 |
| 7 | 8 | 9 |'
    @board_logic = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
  end

  def update_board_ui(player_move, player_sign)
    @board_ui.gsub!(player_move, player_sign)
  end

  def update_board_logic(player_move, player_sign)
    @board_logic = @board_logic.map! { |array| array.map! { |item| item == player_move.to_i ? player_sign : item } }
  end

  def row_win
    board_logic.each do |array|
      return true if array.all?(array[0]) == true
    end
  end

  def column_win
    board_logic.length.times do |i|
      true if board_logic[0][i] == board_logic[1][i] &&
                   board_logic[1][i] == board_logic[2][i]
    end
  end

  def diagonal_win
    true if (board_logic[0][0] == board_logic[1][1] &&
      board_logic[1][1] == board_logic[2][2]) ||
            (board_logic[0][2] == board_logic[1][1] &&
            board_logic[1][1] == board_logic[2][0])
  end

  def winning_condition
    puts row_win
  end
end

puts
puts 'Welcome to Tic-Tac-Toe!'
puts
puts 'Enter name for player 1: '
player_one = gets.chomp.capitalize
player1 = Player.new(player_one, 'X')
puts
puts 'Enter name for player 2: '
player_two = gets.chomp.capitalize
player2 = Player.new(player_two, 'O')
puts
game = Game.new
puts "#{player1.name} will be X & #{player2.name} will be O."
puts
puts 'Game Instructions: Choose a available number to place your move!'
puts 'The game will start now!'
puts 'Have fun!'
players = [player1, player2]
player = players[0]
game_on = true
moves = 0
while moves <= 9 && game_on
  puts
  puts game.board_ui
  puts
  if moves < 9
    puts "#{player.name} make your move: "
    player_move = gets.chomp.to_s
    game.update_board_ui(player_move, player.sign)
    game.update_board_logic(player_move, player.sign)
    if game.winning_condition
      puts
      puts game.board_ui
      puts
      puts "#{player.name} has won the game!"
      game_on = false
    end
    player = player == players[0] ? players[1] : players[0]
  end
  moves += 1
end
